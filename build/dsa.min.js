const address={genesis:"0x0000000000000000000000000000000000000000",core:{index:"0x2971AdFa57b20E5a416aE5a708A8655A9c74f723",list:"0x4c8a1BEb8a87765788946D6B19C6C6355194AbEb"},resolver:{core:"0xD6fB4fd8b595d0A1dE727C35fe6F1D4aE5B60F51"}},ABI={INDEX_CORE:[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"origin",type:"address"}],name:"LogAccountCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newAccount",type:"address"},{indexed:!0,internalType:"address",name:"_connectors",type:"address"},{indexed:!0,internalType:"address",name:"_check",type:"address"}],name:"LogNewAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"accountVersion",type:"uint256"},{indexed:!0,internalType:"address",name:"check",type:"address"}],name:"LogNewCheck",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"master",type:"address"}],name:"LogNewMaster",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"master",type:"address"}],name:"LogUpdateMaster",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"account",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_newAccount",type:"address"},{internalType:"address",name:"_connectors",type:"address"},{internalType:"address",name:"_check",type:"address"}],name:"addNewAccount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"accountVersion",type:"uint256"},{internalType:"address",name:"_origin",type:"address"}],name:"build",outputs:[{internalType:"address",name:"_account",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"accountVersion",type:"uint256"},{internalType:"address[]",name:"_targets",type:"address[]"},{internalType:"bytes[]",name:"_datas",type:"bytes[]"},{internalType:"address",name:"_origin",type:"address"}],name:"buildWithCast",outputs:[{internalType:"address",name:"_account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"accountVersion",type:"uint256"},{internalType:"address",name:"_newCheck",type:"address"}],name:"changeCheck",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newMaster",type:"address"}],name:"changeMaster",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"check",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"connectors",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"version",type:"uint256"},{internalType:"address",name:"query",type:"address"}],name:"isClone",outputs:[{internalType:"bool",name:"result",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"list",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"master",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_master",type:"address"},{internalType:"address",name:"_list",type:"address"},{internalType:"address",name:"_account",type:"address"},{internalType:"address",name:"_connectors",type:"address"}],name:"setBasics",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"updateMaster",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"versionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],LIST_CORE:[{inputs:[{internalType:"uint64",name:"",type:"uint64"}],name:"accountAddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"accountID",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"",type:"uint64"}],name:"accountLink",outputs:[{internalType:"address",name:"first",type:"address"},{internalType:"address",name:"last",type:"address"},{internalType:"uint64",name:"count",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"",type:"uint64"},{internalType:"address",name:"",type:"address"}],name:"accountList",outputs:[{internalType:"address",name:"prev",type:"address"},{internalType:"address",name:"next",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"accounts",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"addAuth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"instaIndex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"removeAuth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userLink",outputs:[{internalType:"uint64",name:"first",type:"uint64"},{internalType:"uint64",name:"last",type:"uint64"},{internalType:"uint64",name:"count",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint64",name:"",type:"uint64"}],name:"userList",outputs:[{internalType:"uint64",name:"prev",type:"uint64"},{internalType:"uint64",name:"next",type:"uint64"}],stateMutability:"view",type:"function"}],CORE_RESOLVER:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"connectors",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"id",type:"uint64"}],name:"getAccount",outputs:[{internalType:"address",name:"account",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountOwners",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"}],name:"getAccountVersions",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEnabledConnectores",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getID",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getIDOwners",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getOwnerAccounts",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getOwnerDetails",outputs:[{components:[{internalType:"uint64[]",name:"IDs",type:"uint64[]"},{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"versions",type:"uint256[]"}],name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getOwnerIDs",outputs:[{internalType:"uint64[]",name:"",type:"uint64[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStaticConnectores",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"index",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"list",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]},helpers={cleanAddress:function(e){return e.slice(0,4)+"..."+e.slice(-4)},cleanTxn:function(e){return e.slice(0,6)+"..."+e.slice(-6)},cleanDecimal:function(e,t){var n=100;return t&&(n=10**t),Math.floor(Number(e)*n)/n},cleanNumber:function(e){return e>1e6?`${cleanDecimal(e/1e6).toLocaleString()} M`:e>1e4?`${cleanDecimal(e/1e3).toLocaleString()} K`:e?cleanDecimal(e).toLocaleString():"0.00"},bigNumInString:function(e){var t;Math.abs(e)<1?(t=parseInt(e.toString().split("e-")[1]))&&(e*=Math.pow(10,t-1),e="0."+new Array(t).join("0")+e.toString().substring(2)):(t=parseInt(e.toString().split("+")[1]))>20&&(t-=20,e/=Math.pow(10,t),e+=new Array(t+1).join("0"));return e}};class DSA{constructor(){this.constant=constant,this.helpers=helpers}async build(e){var t=web3.currentProvider.selectedAddress;return e||(e={}),e.owner||(e.owner=t),e.version||(e.version=1),e.origin||(e.origin=address.genesis),new web3.eth.Contract(ABI.INDEX_CORE,address.index).methods.build(e.owner,e.version,e.origin).send({from:t}).on("transactionHash",e=>(console.log(`txHash: ${e}`),e))}async count(){return new web3.eth.Contract(ABI.LIST_CORE,address.list).methods.accounts().call().then(e=>e)}async getAccounts(e){return new web3.eth.Contract(ABI.CORE_RESOLVER,address.core).methods.getOwnerDetails(e).call({from:address.genesis}).then(e=>{numberOfAccounts=e.IDs.length,accounts=new Array(numberOfAccounts);for(var t=0;t<numberOfAccounts;t++)accounts[t]=[];return e.IDs.forEach((e,t)=>{accounts[t].id=e}),e.accounts.forEach((e,t)=>{accounts[t].account_id=e}),e.versions.forEach((e,t)=>{accounts[t].version=e}),accounts})}async getAuthentications(e){return new web3.eth.Contract(ABI.CORE_RESOLVER,address.instaread).methods.getIDOwners(e).call({from:address.genesis})}}